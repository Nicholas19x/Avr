local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()

local Window = OrionLib:MakeWindow({
    Name = "TEST HUB",
    HidePremium = false,
    IntroText = "TEST HUB",
    SaveConfig = true,
    ConfigFolder = "TEST HUB"
})

local GameplayTab = Window:MakeTab({
    Name = "Gameplay",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local MiscTab = Window:MakeTab({
    Name = "Misc.",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Auto Upgrade functionality
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local unitsFolder = game:GetService("Workspace"):FindFirstChild("Units")

local function sendUnitNames()
    if unitsFolder then
        for _, item in pairs(unitsFolder:GetChildren()) do
            local objectName = item.Name
            local args = {"Upgrade", objectName}
            ReplicatedStorage.Networking.UnitEvent:FireServer(unpack(args))
            wait(0.1)
        end

        local upgradeEventArgs = {"UpgradeAll"}
        ReplicatedStorage.Networking.UnitEvent:FireServer(unpack(upgradeEventArgs))
    end
end

local isAutoUpgradeActive = false
local function autoUpgradeLoop()
    while isAutoUpgradeActive do
        sendUnitNames()
        wait(1)
    end
end

GameplayTab:AddToggle({
    Name = "Enable Auto Upgrade",
    Default = false,
    Callback = function(value)
        isAutoUpgradeActive = value
        if isAutoUpgradeActive then
            spawn(autoUpgradeLoop)
        end
    end
})

-- Auto Next functionality
local isAutoNextActive = false

GameplayTab:AddToggle({
    Name = "Auto Next",
    Default = false,
    Callback = function(value)
        isAutoNextActive = value
        if isAutoNextActive then
            spawn(function()
                while isAutoNextActive do
                    local args = { [1] = "Next" }
                    game:GetService("ReplicatedStorage").Networking.EndScreen.VoteEvent:FireServer(unpack(args))
                    wait(1)
                end
            end)
        end
    end
})

-- Miscellaneous Buttons
MiscTab:AddButton({
    Name = "Summonx10",
    Callback = function()
        local args = { [1] = "SummonTen", [2] = "Special" }
        game:GetService("ReplicatedStorage").Networking.Units.SummonEvent:FireServer(unpack(args))
    end    
})

MiscTab:AddButton({
    Name = "Summonx1",
    Callback = function()
        local args = { [1] = "SummonOne", [2] = "Special" }
        game:GetService("ReplicatedStorage").Networking.Units.SummonEvent:FireServer(unpack(args))
    end    
})

MiscTab:AddButton({
    Name = "RedeemCode",
    Callback = function()
        local codes = {
            "400KLIKES", "100KLIKES", "200KLIKES", "300KLIKES",
            "10MVISITS", "25MVISITS", "10KLIKES", "RELEASE", "DELAY"
            -- Add more codes as needed
        }

        local function fireCode(code)
            local args = { [1] = code }
            game:GetService("ReplicatedStorage").Networking.CodesEvent:FireServer(unpack(args))
        end

        for _, code in ipairs(codes) do
            pcall(function()
                fireCode(code)
            end)
        end
    end    
})
